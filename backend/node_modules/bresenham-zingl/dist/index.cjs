"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});function L(t,a,i,f,e){const h=Math.abs(i-t),o=t<i?1:-1,n=-Math.abs(f-a),l=a<f?1:-1;let r=h+n,M;for(;;){if(e(t,a),M=2*r,M>=n){if(t===i)break;r+=n,t+=o}if(M<=h){if(a===f)break;r+=h,a+=l}}}function Q(t,a,i,f,e){const h=t<i?1:-1,o=a<f?1:-1;let n,l=Math.abs(i-t),r=Math.abs(f-a),M=l*l+r*r,c=M===0?1:1/Math.sqrt(M);for(l*=c,r*=c,M=l-r;;){if(e(t,a,Math.abs(M-(l+r))>>16),c=M,n=t,2*c>=-l){if(t===i)break;c+r<16711680&&e(t,a+o,c+r>>16),M-=r,t+=h}if(2*c<=r){if(a===f)break;l-c<16711680&&e(n+h,a,l-c>>16),M+=l,a+=o}}}function A(t,a,i,f,e,h){let o=Math.abs(i-t),n=t<i?1:-1,l=Math.abs(f-a),r=a<f?1:-1,M=o-l,c,q,u,b=o+l==0?1:Math.sqrt(o*o+l*l);for(e=(e+1)/2;;){if(h(t,a,Math.max(0,255*(Math.abs(M-o+l)/b-e+1))),c=M,q=t,2*c>=-o){for(c+=l,u=a;c<b*e&&(f!=u||o>l);c+=o)h(t,u+=r,Math.max(0,255*(Math.abs(c)/b-e+1)));if(t==i)break;c=M,M-=l,t+=n}if(2*c<=l){for(c=o-c;c<b*e&&(i!=q||o<l);c+=l)h(q+=n,a,Math.max(0,255*(Math.abs(c)/b-e+1)));if(a==f)break;M+=o,a+=r}}}function H(t,a="assert error"){if(!t)throw new Error(a)}function w(t,a,i,f,e,h,o,n){var l=t-2*i+e,r=a-2*f+h,M=t-i,c=a-f,q,u,b;H(o>=0,"width is negative"),M*(e-i)>0&&(c*(h-f)>0&&Math.abs(M*r)>Math.abs(c*l)&&(t=e,e=M+i,a=h,h=c+f),t==e||o==1?u=(t-i)/l:(b=Math.sqrt(4*o*o*(t-i)*(e-i)+(e-t)*(e-t)),i<t&&(b=-b),u=(2*o*(t-i)-t+e+b)/(2*(1-o)*(e-t))),b=1/(2*u*(1-u)*(o-1)+1),M=(u*u*(t-2*o*i+e)+2*u*(o*i-t)+t)*b,c=(u*u*(a-2*o*f+h)+2*u*(o*f-a)+a)*b,q=u*(o-1)+1,q*=q*b,o=((1-u)*(o-1)+1)*Math.sqrt(b),l=Math.floor(M+.5),r=Math.floor(c+.5),c=(M-t)*(f-a)/(i-t)+a,F(t,a,l,Math.floor(c+.5),l,r,q,n),c=(M-e)*(f-h)/(i-e)+h,f=Math.floor(c+.5),t=i=l,a=r),(a-f)*(h-f)>0&&(a==h||o==1?u=(a-f)/(a-2*f+h):(b=Math.sqrt(4*o*o*(a-f)*(h-f)+(h-a)*(h-a)),f<a&&(b=-b),u=(2*o*(a-f)-a+h+b)/(2*(1-o)*(h-a))),b=1/(2*u*(1-u)*(o-1)+1),M=(u*u*(t-2*o*i+e)+2*u*(o*i-t)+t)*b,c=(u*u*(a-2*o*f+h)+2*u*(o*f-a)+a)*b,q=u*(o-1)+1,q*=q*b,o=((1-u)*(o-1)+1)*Math.sqrt(b),l=Math.floor(M+.5),r=Math.floor(c+.5),M=(i-t)*(c-a)/(f-a)+t,F(t,a,Math.floor(M+.5),r,l,r,q,n),M=(i-e)*(c-h)/(f-h)+e,i=Math.floor(M+.5),t=l,a=f=r),F(t,a,i,f,e,h,o*o,n)}function F(t,a,i,f,e,h,o,n){var l=e-i,r=h-f,M=t-e,c=a-h,q=t-i,u=a-f,b=q*r+u*l,s=q*r-u*l,d;if(H(q*l<=0&&u*r<=0,"sign of gradient must not change"),s!=0&&o>0){if(l*l+r*r>q*q+u*u&&(e=t,t-=M,h=a,a-=c,s=-s),q=2*(4*o*l*q+M*M),u=2*(4*o*r*u+c*c),l=t<e?1:-1,r=a<h?1:-1,b=-2*l*r*(2*o*b+M*c),s*l*r<0&&(q=-q,u=-u,b=-b,s=-s),M=4*o*(i-t)*r*s+q/2+b,c=4*o*(a-f)*l*s+u/2+b,o<.5&&(c>b||M<b)){s=(o+1)/2,o=Math.sqrt(o),b=1/(o+1),l=Math.floor((t+2*o*i+e)*b/2+.5),r=Math.floor((a+2*o*f+h)*b/2+.5),M=Math.floor((o*i+t)*b+.5),c=Math.floor((f*o+a)*b+.5),F(t,a,M,c,l,r,s,n),M=Math.floor((o*i+e)*b+.5),c=Math.floor((f*o+h)*b+.5),F(l,r,M,c,e,h,s,n);return}d=M+c-b;do{if(n(t,a),t==e&&a==h)return;i=2*d>c?1:0,f=2*(d+u)<-c?1:0,(2*d<M||f)&&(a+=r,c+=b,d+=M+=q),(2*d>M||i)&&(t+=l,M+=b,d+=c+=u)}while(c<=b&&M>=b)}L(t,a,e,h,n)}function V(t,a,i,f,e,h,o,n){var l=e-i,r=h-f,M=t-e,c=a-h,q=t-i,u=a-f,b=q*r+u*l,s=q*r-u*l,d,z,N;if(H(q*l<=0&&u*r<=0),s!=0&&o>0){if(l*l+r*r>q*q+u*u&&(e=t,t-=M,h=a,a-=c,s=-s),q=2*(4*o*l*q+M*M),u=2*(4*o*r*u+c*c),l=t<e?1:-1,r=a<h?1:-1,b=-2*l*r*(2*o*b+M*c),s*l*r<0&&(q=-q,u=-u,s=-s,b=-b),M=4*o*(i-t)*r*s+q/2+b,c=4*o*(a-f)*l*s+u/2+b,o<.5&&c>M)return s=(o+1)/2,o=Math.sqrt(o),b=1/(o+1),l=Math.floor((t+2*o*i+e)*b/2+.5),r=Math.floor((a+2*o*f+h)*b/2+.5),M=Math.floor((o*i+t)*b+.5),c=Math.floor((f*o+a)*b+.5),V(t,a,M,c,l,r,s,n),M=Math.floor((o*i+e)*b+.5),c=Math.floor((f*o+h)*b+.5),V(l,r,M,c,e,h,s,n);d=M+c-b;do{if(s=Math.min(M-b,b-c),z=Math.max(M-b,b-c),z+=2*z*s*s/(4*z*z+s*s),i=255*Math.abs(d-M-c+b)/z,i<256&&n(t,a,i),N=2*d+c<0){if(a==h)return;M-d<z&&n(t+l,a,255*Math.abs(M-d)/z)}if(2*d+M>0){if(t==e)return;d-c<z&&n(t,a+r,255*Math.abs(d-c)/z),t+=l,M+=b,d+=c+=u}N&&(a+=r,c+=b,d+=M+=q)}while(c<M)}Q(t,a,e,h,n)}function P(t,a,i,f,e){let h=-i,o=0,n=f*f,l=h*(2*n+h)+n;do e(t-h,a+o),e(t+h,a+o),e(t+h,a-o),e(t-h,a-o),n=2*l,n>=(h*2+1)*f*f&&(l+=(++h*2+1)*f*f),n<=(o*2+1)*i*i&&(l+=(++o*2+1)*i*i);while(h<=0);for(;o++<f;)e(t,a+o),e(t,a-o)}function y(t,a,i,f,e,h){let o=i*i,n=f*f;const l=Math.sin(e);let r=(o-n)*l;o=Math.sqrt(o-r*l),n=Math.sqrt(n+r*l),i=o+.5,f=n+.5,r=r*i*f/(o*n),Y(t-i,a-f,t+i,a+f,4*r*Math.cos(e),h)}function Y(t,a,i,f,e,h){let o=i-t,n=f-a,l=o*n;if(e===0)return Z(t,a,i,f,h);l!==0&&(l=(l-e)/(l+l)),H(l<=1&&l>=0,"limit angle to |zd|<=xd*yd"),o=Math.floor(o*l+.5),n=Math.floor(n*l+.5),F(t,a+n,t,a,t+o,a,1-l,h),F(t,a+n,t,f,i-o,f,l,h),F(i,f-n,i,f,i-o,f,1-l,h),F(i,f-n,i,a,t+o,a,l,h)}function Z(t,a,i,f,e){let h=Math.abs(i-t),o=Math.abs(f-a),n=o&1,l=4*(1-h)*o*o,r=4*(n+1)*h*h,M=l+r+n*h*h,c;t>i&&(t=i,i+=h),a>f&&(a=f),a+=(o+1)/2,f=a-n,h=8*h*h,n=8*o*o;do e(i,a),e(t,a),e(t,f),e(i,f),c=2*M,c<=r&&(a++,f--,M+=r+=h),(c>=l||2*M>r)&&(t++,i--,M+=l+=n);while(t<=i);for(;a-f<=o;)e(t-1,a),e(i+1,a++),e(t-1,f),e(i+1,f--)}function x(t,a,i,f){var e=-i,h=0,o=2-2*i;do f(t-e,a+h),f(t-h,a-e),f(t+e,a-h),f(t+h,a+e),i=o,i<=h&&(o+=++h*2+1),(i>e||o>h)&&(o+=++e*2+1);while(e<0)}function aa(t,a,i,f){var e=-i,h=0,o,n,l,r=2-2*i;i=1-r;do o=255*Math.abs(r-2*(e+h)-2)/i,f(t-e,a+h,o),f(t-h,a-e,o),f(t+e,a-h,o),f(t+h,a+e,o),l=r,n=e,r+h>0&&(o=255*(r-2*e-1)/i,o<256&&(f(t-e,a+h+1,o),f(t-h-1,a-e,o),f(t+e,a-h-1,o),f(t+h+1,a+e,o)),r+=++e*2+1),l+n<=0&&(o=255*(2*h+3-l)/i,o<256&&(f(t-n-1,a+h,o),f(t-h,a-n-1,o),f(t+n+1,a-h,o),f(t+h,a+n+1,o)),r+=++h*2+1);while(e<0)}function ta(t,a,i,f,e,h,o){var n=t-i,l=a-f,r=t-2*i+e,M;n*(e-i)>0&&(l*(h-f)>0&&Math.abs((a-2*f+h)/r*n)>Math.abs(l)&&(t=e,e=n+i,a=h,h=l+f),r=(t-i)/r,M=(1-r)*((1-r)*a+2*r*f)+r*r*h,r=(t*e-i*i)*r/(t-i),n=Math.floor(r+.5),l=Math.floor(M+.5),M=(f-a)*(r-t)/(i-t)+a,J(t,a,n,Math.floor(M+.5),n,l,o),M=(f-h)*(r-e)/(i-e)+h,t=i=n,a=l,f=Math.floor(M+.5)),(a-f)*(h-f)>0&&(r=a-2*f+h,r=(a-f)/r,M=(1-r)*((1-r)*t+2*r*i)+r*r*e,r=(a*h-f*f)*r/(a-f),n=Math.floor(M+.5),l=Math.floor(r+.5),M=(i-t)*(r-a)/(f-a)+t,J(t,a,Math.floor(M+.5),l,n,l,o),M=(i-e)*(r-h)/(f-h)+e,t=n,i=Math.floor(M+.5),a=f=l),J(t,a,i,f,e,h,o)}function J(t,a,i,f,e,h,o){var n=e-i,l=h-f,r=t-i,M=a-f,c,q,u,b,s=r*l-M*n;if(H(r*n<=0&&M*l<=0,"sign of gradient must not change"),n*n+l*l>r*r+M*M&&(e=t,t=n+i,h=a,a=l+f,s=-s),s!=0){r+=n,r*=n=t<e?1:-1,M+=l,M*=l=a<h?1:-1,c=2*r*M,r*=r,M*=M,s*n*l<0&&(r=-r,M=-M,c=-c,s=-s),q=4*l*s*(i-t)+r-c,u=4*n*s*(a-f)+M-c,r+=r,M+=M,b=q+u+c;do{if(o(t,a),t==e&&a==h)return;f=+(2*b<q),2*b>u&&(t+=n,q-=c,b+=u+=M),f&&(a+=l,u-=c,b+=q+=r)}while(u<0&&q>0)}L(t,a,e,h,o)}function fa(t,a,i,f,e,h,o){var n=t-i,l=a-f,r=t-2*i+e,M;n*(e-i)>0&&(l*(h-f)>0&&Math.abs((a-2*f+h)/r*n)>Math.abs(l)&&(t=e,e=n+i,a=h,h=l+f),r=(t-i)/r,M=(1-r)*((1-r)*a+2*r*f)+r*r*h,r=(t*e-i*i)*r/(t-i),n=Math.floor(r+.5),l=Math.floor(M+.5),M=(f-a)*(r-t)/(i-t)+a,K(t,a,n,Math.floor(M+.5),n,l,o),M=(f-h)*(r-e)/(i-e)+h,t=i=n,a=l,f=Math.floor(M+.5)),(a-f)*(h-f)>0&&(r=a-2*f+h,r=(a-f)/r,M=(1-r)*((1-r)*t+2*r*i)+r*r*e,r=(a*h-f*f)*r/(a-f),n=Math.floor(M+.5),l=Math.floor(r+.5),M=(i-t)*(r-a)/(f-a)+t,K(t,a,Math.floor(M+.5),l,n,l,o),M=(i-e)*(r-h)/(f-h)+e,t=n,i=Math.floor(M+.5),a=f=l),K(t,a,i,f,e,h,o)}function K(t,a,i,f,e,h,o){var n=e-i,l=h-f,r=t-i,M=a-f,c,q,u,b,s,d=r*l-M*n;if(n*n+l*l>r*r+M*M&&(e=t,t=n+i,h=a,a=l+f,d=-d),d!=0){r+=n,r*=n=t<e?1:-1,M+=l,M*=l=a<h?1:-1,c=2*r*M,r*=r,M*=M,d*n*l<0&&(r=-r,M=-M,c=-c,d=-d),q=4*l*(i-t)*d+r-c,u=4*n*(a-f)*d+M-c,r+=r,M+=M,b=q+u+c;do{if(d=Math.min(q+c,-c-u),s=Math.max(q+c,-c-u),s+=2*s*d*d/(4*s*s+d*d),o(t,a,255*Math.abs(b-q-u-c)/s),t==e||a==h)break;i=t,d=q-b,f=+(2*b+u<0),2*b+q>0&&(b-u<s&&o(t,a+l,255*Math.abs(b-u)/s),t+=n,q-=c,b+=u+=M),f&&(d<s&&o(i+n,a,255*Math.abs(d)/s),a+=l,u-=c,b+=q+=r)}while(u<q)}Q(t,a,e,h,o)}function _(t,a,i,f,e,h,o,n,l){var r,M,c,q=1;let u=t<o?1:-1,b=a<n?1:-1,s=-Math.abs(t+i-e-o),d=s-4*u*(i-e),z=u*(t-i-e+o),N=-Math.abs(a+f-h-n),B=N-4*b*(f-h),k=b*(a-f-h+n),W,p,j,E,G,R,O,v,g,S,D,C=.01;if(H((i-t)*(e-o)<C&&((o-t)*(i-e)<C||z*z<d*s+C),"slope change"),H((f-a)*(h-n)<C&&((n-a)*(f-h)<C||k*k<B*N+C),"slope change"),d==0&&B==0)return u=Math.floor((3*i-t+1)/2),b=Math.floor((3*f-a+1)/2),J(t,a,u,b,o,n,l);i=(i-t)*(i-t)+(f-a)*(f-a)+1,e=(e-o)*(e-o)+(h-n)*(h-n)+1;do{W=d*k-z*B,p=d*N-s*B,j=z*N-s*k,S=W*(W+p-3*j)+p*p,r=S>0?1:Math.sqrt(1+1024/i),W*=r,p*=r,j*=r,S*=r*r,R=9*(W+p+j)/8,E=8*(d-B),v=27*(8*W*(k*k-B*N)+S*(B+2*k+N))/64-B*B*(R-B),g=27*(8*W*(z*z-d*s)-S*(d+2*z+s))/64-d*d*(R+d),G=3*(3*W*(3*k*k-B*B-2*B*N)-B*(3*p*(B+k)+B*E))/4,O=3*(3*W*(3*z*z-d*d-2*d*s)-d*(3*p*(d+z)+d*E))/4,R=d*B*(6*W+6*p-3*j+E),p=B*B,E=d*d,R=3*(R+9*r*(E*k*N-z*s*p)-18*z*k*W)/8,S<0&&(v=-v,g=-g,G=-G,O=-O,R=-R,p=-p,E=-E),W=6*B*p,p=-6*d*p,j=6*B*E,E=-6*d*E,v+=R,S=v+g,g+=R;a:for(D=R,M=c=r;t!=o&&a!=n;){l(t,a);do{if(v>D||g<D)break a;f=2*S-g,2*S>=v&&(M--,S+=v+=G,g+=R+=p,O+=j,G+=W),f<=0&&(c--,S+=g+=O,v+=R+=j,G+=p,O+=E)}while(M>0&&c>0);2*M<=r&&(t+=u,M+=r),2*c<=r&&(a+=b,c+=r),D==R&&v<0&&g>0&&(D=C)}G=t,t=o,o=G,u=-u,z=-z,O=a,a=n,n=O,b=-b,k=-k,i=e}while(q--);L(t,a,o,n,l)}function $(t,a,i,f,e,h,o,n,l){let r,M,c,q=1,u=t<o?1:-1,b=a<n?1:-1,s=-Math.abs(t+i-e-o),d=s-4*u*(i-e),z=u*(t-i-e+o),N=-Math.abs(a+f-h-n),B=N-4*b*(f-h),k=b*(a-f-h+n),W,p,j,E,G,R,O,v,g,S,D,C,T,X;const I=.01;if(H((i-t)*(e-o)<I&&((o-t)*(i-e)<I||z*z<d*s+I)),H((f-a)*(h-n)<I&&((n-a)*(f-h)<I||k*k<B*N+I)),d===0&&B===0)return u=Math.floor((3*i-t+1)/2),b=Math.floor((3*f-a+1)/2),K(t,a,u,b,o,n,l);i=(i-t)*(i-t)+(f-a)*(f-a)+1,e=(e-o)*(e-o)+(h-n)*(h-n)+1;do{W=d*k-z*B,p=d*N-s*B,j=z*N-s*k,X=4*W*j-p*p,S=W*(W+p-3*j)+p*p,r=S>0?1:Math.sqrt(1+1024/i),W*=r,p*=r,j*=r,S*=r*r,R=9*(W+p+j)/8,E=8*(d-B),v=27*(8*W*(k*k-B*N)+S*(B+2*k+N))/64-B*B*(R-B),g=27*(8*W*(z*z-d*s)-S*(d+2*z+s))/64-d*d*(R+d),G=3*(3*W*(3*k*k-B*B-2*B*N)-B*(3*p*(B+k)+B*E))/4,O=3*(3*W*(3*z*z-d*d-2*d*s)-d*(3*p*(d+z)+d*E))/4,R=d*B*(6*W+6*p-3*j+E),p=B*B,E=d*d,R=3*(R+9*r*(E*k*N-z*s*p)-18*z*k*W)/8,S<0&&(v=-v,g=-g,G=-G,O=-O,R=-R,p=-p,E=-E),W=6*B*p,p=-6*d*p,j=6*B*E,E=-6*d*E,v+=R,S=v+g,g+=R;let U=!1;a:for(M=c=r;t!==o&&a!==n;){f=Math.min(Math.abs(R-v),Math.abs(g-R)),T=Math.max(Math.abs(R-v),Math.abs(g-R)),T=r*(T+2*T*f*f/(4*T*T+f*f)),f=255*Math.abs(S-(r-M+1)*v-(r-c+1)*g+r*R)/T,f<256&&l(t,a,f),D=Math.abs(S-(r-M+1)*v+(c-1)*g),C=Math.abs(S+(M-1)*v-(r-c+1)*g),h=a;do{if(X>=-I&&(v+G>R||g+O<R)){U=!0;break a}if(f=2*S+v,2*S+g>0)M--,S+=v+=G,g+=R+=p,O+=j,G+=W;else if(f>0){U=!0;break a}f<=0&&(c--,S+=g+=O,v+=R+=j,G+=p,O+=E)}while(M>0&&c>0);2*c<=r&&(C<T&&l(t+u,a,255*C/T),a+=b,c+=r),2*M<=r&&(D<T&&l(t,h+b,255*D/T),t+=u,M+=r)}U&&(2*S<g&&2*c<=r+2&&(C<T&&l(t+u,a,255*C/T),a+=b),2*S>v&&2*M<=r+2&&(D<T&&l(t,h+b,255*D/T),t+=u),G=t,t=o,o=G,u=-u,z=-z,O=a,a=n,n=O,b=-b,k=-k,i=e);break}while(q--);Q(Math.floor(t),Math.floor(a),Math.floor(o),Math.floor(n),l)}function m(t,a,i,f,e,h,o,n,l,r){let M=0,c=0,q=t+i-e-o,u=q-4*(i-e),b=t-i-e+o,s=b+4*(i+e),d=a+f-h-n,z=d-4*(f-h),N=a-f-h+n,B=N+4*(f+h);var k=t,W,p,j,E=a,G,R,O;let v=b*b-u*q,g;const S=[0,0,0,0,0];for(u==0?Math.abs(q)<2*Math.abs(b)&&(S[M++]=q/(2*b)):v>0&&(g=Math.sqrt(v),v=(b-g)/u,Math.abs(v)<1&&(S[M++]=v),v=(b+g)/u,Math.abs(v)<1&&(S[M++]=v)),v=N*N-z*d,z==0?Math.abs(d)<2*Math.abs(N)&&(S[M++]=d/(2*N)):v>0&&(g=Math.sqrt(v),v=(N-g)/z,Math.abs(v)<1&&(S[M++]=v),v=(N+g)/z,Math.abs(v)<1&&(S[M++]=v)),c=1;c<M;c++)(v=S[c-1])>S[c]&&(S[c-1]=S[c],S[c]=v,c=0);for(v=-1,S[M]=1,c=0;c<=M;c++)g=S[c],W=(v*(v*b-2*q)-g*(v*(v*u-2*b)+q)+s)/8-k,G=(v*(v*N-2*d)-g*(v*(v*z-2*N)+d)+B)/8-E,p=(g*(g*b-2*q)-v*(g*(g*u-2*b)+q)+s)/8-k,R=(g*(g*N-2*d)-v*(g*(g*z-2*N)+d)+B)/8-E,k-=j=(g*(g*(3*b-g*u)-3*q)+s)/8,E-=O=(g*(g*(3*N-g*z)-3*d)+B)/8,o=Math.floor(j+.5),n=Math.floor(O+.5),k!=0&&(W*=k=(t-o)/k,p*=k),E!=0&&(G*=E=(a-n)/E,R*=E),(t!=o||a!=n)&&l(t,a,t+W,a+G,t+p,a+R,o,n,r),t=o,a=n,k=j,E=O,v=g}function ra(t,a,i,f,e,h,o,n,l){m(t,a,i,f,e,h,o,n,_,l)}function oa(t,a,i,f,e,h,o,n,l){m(t,a,i,f,e,h,o,n,$,l)}exports.circle=x;exports.circleAA=aa;exports.cubicBezier=ra;exports.cubicBezierAA=oa;exports.cubicBezierSegment=_;exports.cubicBezierSegmentAA=$;exports.ellipse=P;exports.ellipseRect=Z;exports.line=L;exports.lineAA=Q;exports.lineWidth=A;exports.quadBezier=ta;exports.quadBezierAA=fa;exports.quadBezierSegment=J;exports.quadBezierSegmentAA=K;exports.quadRationalBezier=w;exports.quadRationalBezierSegment=F;exports.quadRationalBezierSegmentAA=V;exports.rotatedEllipse=y;exports.rotatedEllipseRect=Y;
