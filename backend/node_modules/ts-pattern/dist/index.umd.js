!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n||self).tsPattern={})}(this,function(n){function t(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=Array(t);e<t;e++)r[e]=n[e];return r}function e(n,e){var r="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(r)return(r=r.call(n)).next.bind(r);if(Array.isArray(n)||(r=function(n,e){if(n){if("string"==typeof n)return t(n,e);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(n,e):void 0}}(n))||e&&n&&"number"==typeof n.length){r&&(n=r);var u=0;return function(){return u>=n.length?{done:!0}:{done:!1,value:n[u++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(n){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},r(n)}function u(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(u=function(){return!!n})()}function i(n,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},i(n,t)}function o(n){var t="function"==typeof Map?new Map:void 0;return o=function(n){if(null===n||!function(n){try{return-1!==Function.toString.call(n).indexOf("[native code]")}catch(t){return"function"==typeof n}}(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(n))return t.get(n);t.set(n,e)}function e(){return function(n,t,e){if(u())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(n.bind.apply(n,r));return e&&i(o,e.prototype),o}(n,arguments,r(this).constructor)}return e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,n)},o(n)}var c=Symbol.for("@ts-pattern/matcher"),f=Symbol.for("@ts-pattern/isVariadic"),a="@ts-pattern/anonymous-select-key",l=function(n){return Boolean(n&&"object"==typeof n)},s=function(n){return n&&!!n[c]},h=function n(t,r,u){if(s(t)){var i=t[c]().match(r),o=i.matched,a=i.selections;return o&&a&&Object.keys(a).forEach(function(n){return u(n,a[n])}),o}if(l(t)){if(!l(r))return!1;if(Array.isArray(t)){if(!Array.isArray(r))return!1;for(var h,v=[],p=[],g=[],y=e(t.keys());!(h=y()).done;){var d=t[h.value];s(d)&&d[f]?g.push(d):g.length?p.push(d):v.push(d)}if(g.length){if(g.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(r.length<v.length+p.length)return!1;var m=r.slice(0,v.length),b=0===p.length?[]:r.slice(-p.length),w=r.slice(v.length,0===p.length?Infinity:-p.length);return v.every(function(t,e){return n(t,m[e],u)})&&p.every(function(t,e){return n(t,b[e],u)})&&(0===g.length||n(g[0],w,u))}return t.length===r.length&&t.every(function(t,e){return n(t,r[e],u)})}return Reflect.ownKeys(t).every(function(e){var i,o=t[e];return(e in r||s(i=o)&&"optional"===i[c]().matcherType)&&n(o,r[e],u)})}return Object.is(r,t)},v=function n(t){var e,r,u;return l(t)?s(t)?null!=(e=null==(r=(u=t[c]()).getSelectionKeys)?void 0:r.call(u))?e:[]:Array.isArray(t)?p(t,n):p(Object.values(t),n):[]},p=function(n,t){return n.reduce(function(n,e){return n.concat(t(e))},[])};function g(){var n=[].slice.call(arguments);if(1===n.length){var t=n[0];return function(n){return h(t,n,function(){})}}if(2===n.length)return h(n[0],n[1],function(){});throw new Error("isMatching wasn't given the right number of arguments: expected 1 or 2, received "+n.length+".")}function y(n){return Object.assign(n,{optional:function(){return m(n)},and:function(t){return S(n,t)},or:function(t){return j(n,t)},select:function(t){return void 0===t?x(n):x(t,n)}})}function d(n){return Object.assign(function(n){var t;return Object.assign(n,((t={})[Symbol.iterator]=function(){var t,e=0,r=[{value:Object.assign(n,((t={})[f]=!0,t)),done:!1},{done:!0,value:void 0}];return{next:function(){var n;return null!=(n=r[e++])?n:r.at(-1)}}},t))}(n),{optional:function(){return d(m(n))},select:function(t){return d(void 0===t?x(n):x(t,n))}})}function m(n){var t;return y(((t={})[c]=function(){return{match:function(t){var e={},r=function(n,t){e[n]=t};return void 0===t?(v(n).forEach(function(n){return r(n,void 0)}),{matched:!0,selections:e}):{matched:h(n,t,r),selections:e}},getSelectionKeys:function(){return v(n)},matcherType:"optional"}},t))}var b=function(n,t){for(var r,u=e(n);!(r=u()).done;)if(!t(r.value))return!1;return!0},w=function(n,t){for(var r,u=e(n.entries());!(r=u()).done;){var i=r.value;if(!t(i[1],i[0]))return!1}return!0},O=function(n,t){for(var r,u=e(Reflect.ownKeys(n));!(r=u()).done;){var i=r.value;if(!t(i,n[i]))return!1}return!0};function S(){var n,t=[].slice.call(arguments);return y(((n={})[c]=function(){return{match:function(n){var e={},r=function(n,t){e[n]=t};return{matched:t.every(function(t){return h(t,n,r)}),selections:e}},getSelectionKeys:function(){return p(t,v)},matcherType:"and"}},n))}function j(){var n,t=[].slice.call(arguments);return y(((n={})[c]=function(){return{match:function(n){var e={},r=function(n,t){e[n]=t};return p(t,v).forEach(function(n){return r(n,void 0)}),{matched:t.some(function(t){return h(t,n,r)}),selections:e}},getSelectionKeys:function(){return p(t,v)},matcherType:"or"}},n))}function A(n){var t;return(t={})[c]=function(){return{match:function(t){return{matched:Boolean(n(t))}}}},t}function x(){var n,t=[].slice.call(arguments),e="string"==typeof t[0]?t[0]:void 0,r=2===t.length?t[1]:"string"==typeof t[0]?void 0:t[0];return y(((n={})[c]=function(){return{match:function(n){var t,u=((t={})[null!=e?e:a]=n,t);return{matched:void 0===r||h(r,n,function(n,t){u[n]=t}),selections:u}},getSelectionKeys:function(){return[null!=e?e:a].concat(void 0===r?[]:v(r))}}},n))}function E(n){return!0}function P(n){return"number"==typeof n}function _(n){return"string"==typeof n}function K(n){return"bigint"==typeof n}var N=y(A(E)),T=y(A(E)),B=N,k=function n(t){return Object.assign(y(t),{startsWith:function(e){return n(S(t,(r=e,A(function(n){return _(n)&&n.startsWith(r)}))));var r},endsWith:function(e){return n(S(t,(r=e,A(function(n){return _(n)&&n.endsWith(r)}))));var r},minLength:function(e){return n(S(t,function(n){return A(function(t){return _(t)&&t.length>=n})}(e)))},length:function(e){return n(S(t,function(n){return A(function(t){return _(t)&&t.length===n})}(e)))},maxLength:function(e){return n(S(t,function(n){return A(function(t){return _(t)&&t.length<=n})}(e)))},includes:function(e){return n(S(t,(r=e,A(function(n){return _(n)&&n.includes(r)}))));var r},regex:function(e){return n(S(t,(r=e,A(function(n){return _(n)&&Boolean(n.match(r))}))));var r}})}(A(_)),M=function n(t){return Object.assign(y(t),{between:function(e,r){return n(S(t,function(n,t){return A(function(e){return P(e)&&n<=e&&t>=e})}(e,r)))},lt:function(e){return n(S(t,function(n){return A(function(t){return P(t)&&t<n})}(e)))},gt:function(e){return n(S(t,function(n){return A(function(t){return P(t)&&t>n})}(e)))},lte:function(e){return n(S(t,function(n){return A(function(t){return P(t)&&t<=n})}(e)))},gte:function(e){return n(S(t,function(n){return A(function(t){return P(t)&&t>=n})}(e)))},int:function(){return n(S(t,A(function(n){return P(n)&&Number.isInteger(n)})))},finite:function(){return n(S(t,A(function(n){return P(n)&&Number.isFinite(n)})))},positive:function(){return n(S(t,A(function(n){return P(n)&&n>0})))},negative:function(){return n(S(t,A(function(n){return P(n)&&n<0})))}})}(A(P)),I=function n(t){return Object.assign(y(t),{between:function(e,r){return n(S(t,function(n,t){return A(function(e){return K(e)&&n<=e&&t>=e})}(e,r)))},lt:function(e){return n(S(t,function(n){return A(function(t){return K(t)&&t<n})}(e)))},gt:function(e){return n(S(t,function(n){return A(function(t){return K(t)&&t>n})}(e)))},lte:function(e){return n(S(t,function(n){return A(function(t){return K(t)&&t<=n})}(e)))},gte:function(e){return n(S(t,function(n){return A(function(t){return K(t)&&t>=n})}(e)))},positive:function(){return n(S(t,A(function(n){return K(n)&&n>0})))},negative:function(){return n(S(t,A(function(n){return K(n)&&n<0})))}})}(A(K)),R=y(A(function(n){return"boolean"==typeof n})),W=y(A(function(n){return"symbol"==typeof n})),z=y(A(function(n){return null==n})),F=y(A(function(n){return null!=n})),L={__proto__:null,matcher:c,optional:m,array:function(){var n,t=[].slice.call(arguments);return d(((n={})[c]=function(){return{match:function(n){if(!Array.isArray(n))return{matched:!1};if(0===t.length)return{matched:!0};var e=t[0],r={};if(0===n.length)return v(e).forEach(function(n){r[n]=[]}),{matched:!0,selections:r};var u=function(n,t){r[n]=(r[n]||[]).concat([t])};return{matched:n.every(function(n){return h(e,n,u)}),selections:r}},getSelectionKeys:function(){return 0===t.length?[]:v(t[0])}}},n))},set:function(){var n,t=[].slice.call(arguments);return y(((n={})[c]=function(){return{match:function(n){if(!(n instanceof Set))return{matched:!1};var e={};if(0===n.size)return{matched:!0,selections:e};if(0===t.length)return{matched:!0};var r=function(n,t){e[n]=(e[n]||[]).concat([t])},u=t[0];return{matched:b(n,function(n){return h(u,n,r)}),selections:e}},getSelectionKeys:function(){return 0===t.length?[]:v(t[0])}}},n))},map:function(){var n,t=[].slice.call(arguments);return y(((n={})[c]=function(){return{match:function(n){if(!(n instanceof Map))return{matched:!1};var e={};if(0===n.size)return{matched:!0,selections:e};var r,u=function(n,t){e[n]=(e[n]||[]).concat([t])};if(0===t.length)return{matched:!0};if(1===t.length)throw new Error("`P.map` wasn't given enough arguments. Expected (key, value), received "+(null==(r=t[0])?void 0:r.toString()));var i=t[0],o=t[1];return{matched:w(n,function(n,t){var e=h(i,t,u),r=h(o,n,u);return e&&r}),selections:e}},getSelectionKeys:function(){return 0===t.length?[]:[].concat(v(t[0]),v(t[1]))}}},n))},record:function(){var n,t=[].slice.call(arguments);return y(((n={})[c]=function(){return{match:function(n){if(null===n||"object"!=typeof n||Array.isArray(n))return{matched:!1};var e;if(0===t.length)throw new Error("`P.record` wasn't given enough arguments. Expected (value) or (key, value), received "+(null==(e=t[0])?void 0:e.toString()));var r={},u=function(n,t){r[n]=(r[n]||[]).concat([t])},i=1===t.length?[k,t[0]]:t,o=i[0],c=i[1];return{matched:O(n,function(n,t){var e="string"!=typeof n||Number.isNaN(Number(n))?null:Number(n),r=null!==e&&h(o,e,u),i=h(o,n,u),f=h(c,t,u);return(i||r)&&f}),selections:r}},getSelectionKeys:function(){return 0===t.length?[]:[].concat(v(t[0]),v(t[1]))}}},n))},intersection:S,union:j,not:function(n){var t;return y(((t={})[c]=function(){return{match:function(t){return{matched:!h(n,t,function(){})}},getSelectionKeys:function(){return[]},matcherType:"not"}},t))},when:A,select:x,any:N,unknown:T,_:B,string:k,number:M,bigint:I,boolean:R,symbol:W,nullish:z,nonNullable:F,instanceOf:function(n){return y(A(function(n){return function(t){return t instanceof n}}(n)))},shape:function(n){return y(A(g(n)))}},U=/*#__PURE__*/function(n){var t,e;function r(t){var e,r;try{r=JSON.stringify(t)}catch(n){r=t}return(e=n.call(this,"Pattern matching error: no pattern matches value "+r)||this).input=void 0,e.input=t,e}return e=n,(t=r).prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e),r}(/*#__PURE__*/o(Error)),C={matched:!1,value:void 0},J=/*#__PURE__*/function(){function n(n,t){this.input=void 0,this.state=void 0,this.input=n,this.state=t}var t=n.prototype;return t.with=function(){var t=this,e=[].slice.call(arguments);if(this.state.matched)return this;var r=e[e.length-1],u=[e[0]],i=void 0;3===e.length&&"function"==typeof e[1]?i=e[1]:e.length>2&&u.push.apply(u,e.slice(1,e.length-1));var o=!1,c={},f=function(n,t){o=!0,c[n]=t},l=!u.some(function(n){return h(n,t.input,f)})||i&&!Boolean(i(this.input))?C:{matched:!0,value:r(o?a in c?c[a]:c:this.input,this.input)};return new n(this.input,l)},t.when=function(t,e){if(this.state.matched)return this;var r=Boolean(t(this.input));return new n(this.input,r?{matched:!0,value:e(this.input,this.input)}:C)},t.otherwise=function(n){return this.state.matched?this.state.value:n(this.input)},t.exhaustive=function(n){return void 0===n&&(n=V),this.state.matched?this.state.value:n(this.input)},t.run=function(){return this.exhaustive()},t.returnType=function(){return this},t.narrow=function(){return this},n}();function V(n){throw new U(n)}n.NonExhaustiveError=U,n.P=L,n.Pattern=L,n.isMatching=g,n.match=function(n){return new J(n,C)}});
//# sourceMappingURL=index.umd.js.map
